{% extends "base.html" %}

{% block title %}{{ selected }} – Tienda{% endblock %}

{% block content %}
<main>
  <!-- (Opcional) breadcrumb -->
  <nav class="breadcrumb">
    <a href="{{ url_for('home') }}">Home</a> ›
    <a href="{{ url_for('home') }}">Catalog</a> ›
    <span>{{ selected }}</span>
  </nav>


  <!-- Tu sección dinámica de categorías -->
  <section class="category">
    <div class="top">
      <h2 class="text-wrapper-14">Browse By Category</h2>
      <div class="arrow-s">
        <button class="icon-button" aria-label="Previous category">
          <img class="img"
               src="{{ url_for('static', filename='img/icon-32px-arrow-1.svg') }}"
               alt="Left Arrow" />
        </button>
        <button class="icon-button" aria-label="Next category">
          <img class="img"
               src="{{ url_for('static', filename='img/icon-32px-arrow.svg') }}"
               alt="Right Arrow" />
        </button>
      </div>
    </div>
    <div class="categories">
      {% for c in categorias %}
      <a
        href="{{ url_for('por_categoria', nombre_categoria=c.nombre) }}"
        class="category-card{% if c.nombre == selected %} active{% endif %}"
      >
        <img
          class="img-2"
          src="{{ url_for('static',
                filename='img/icon-' ~ c.nombre|lower|replace(' ', '-') ~ '.svg') }}"
          alt="{{ c.nombre }} Icon"
        />
        <span class="text-wrapper-15">{{ c.nombre }}</span>
      </a>
      {% endfor %}
    </div>
  </section>

  <!-- (Opcional) sección de productos filtrados -->
  <section class="products">
    {% if productos %}
      <div class="product-grid">
        {% for p in productos %}
          <article class="product-card">
            <img src="{{ p.imagen }}" alt="{{ p.nombre }}">
            <h3>{{ p.nombre }}</h3>
            <p>{{ p.descripcion }}</p>
            <p><strong>$ {{ p.precio }}</strong></p>
            <a href="{{ url_for('producto_detalle', id=p._id) }}" class="buy-btn">Comprar</a>
          </article>
        {% endfor %}
      </div>
    {% else %}
      <p>No hay productos en esta categoría.</p>
    {% endif %}
  </section>
</main>
{% endblock %}
